<%- include('partials/header') %>

<div class="container mt-5">
  <h2>Chat with <%= recipient.username %></h2>

  <div class="chat-box border rounded p-3 mb-3" style="height: 400px; overflow-y: auto;">
    <% messages.forEach(msg => { %>
      <div class="<%= msg.sender.toString() === user._id.toString() ? 'text-end' : 'text-start' %> mb-2">
        <span class="badge bg-<%= msg.sender.toString() === user._id.toString() ? 'success' : 'info' %>">
          <%= msg.content %>
        </span>
      </div>
    <% }) %>
  </div>

  <form method="POST" action="/messages/send/<%= recipient._id %>">
    <div class="input-group">
      <input type="text" name="content" class="form-control" placeholder="Type your message..." required>
      <button type="submit" class="btn btn-primary">Send</button>
    </div>
  </form>
</div>

<%- include('partials/footer') %>
